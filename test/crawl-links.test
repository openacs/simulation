if { [catch {
    # Source Tcl libraries
    set script_dir [file dirname [info script]]
    source "${script_dir}/../../../etc/install/tcl/test-procs.tcl"
    source "${script_dir}/simulation-test-procs.tcl"

    # Test Execution START

    ::twt::log_section "Login the site wide admin"
    ::twt::user::login_site_wide_admin

    ::twt::set_crawler_exclude_links {delete remove}
    
    # NOTE: The crawler needs the trailing slash when first invoked
    set simulation_uri /simulation/
    ::twt::log_section "crawling links starting from $simulation_uri"        
    ::twt::crawl_links $simulation_uri

    ::twt::log "Did not visit the following URLs because of exclude list: [join [::twt::get_excluded_urls] "\n"]"
    ::twt::log "TODO: Should we visit the delete links for better coverage? It tears down demo data though."
            
 } result] } {
     global errorInfo

     # Output error stack trace and HTML response body
     ::twt::log $result
     ::twt::log "*** Tcl TRACE ***"
     ::twt::log $errorInfo
     ::twt::log "The response body is: [response body]"

     error "Test failed: $result"
 }
